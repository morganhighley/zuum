<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_TPSkin" data-mc-search-type="Stem" data-mc-help-system-file-name="index.xml" data-mc-path-to-help-system="../../" data-mc-has-content-body="True" data-mc-toc-path="" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="Pragma" content="no-cache" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Best Practices</title>
        <link href="../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Resources/Stylesheets/TP-Global-Styles.css" rel="stylesheet" type="text/css" />
        <style>/*&lt;meta /&gt;*/

.button.previous-topic-button
{
	-pie-background: url('../../Skins/Default/Stylesheets/Images/navigate-previous.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.next-topic-button
{
	-pie-background: url('../../Skins/Default/Stylesheets/Images/navigate-next.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.needs-pie
{
	behavior: url('../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <script src="../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
        <script type="text/javascript" src="../../Skins/Default/Scripts/TPSkin-TopicToolbar.js">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-drilldown vertical menu off-canvas-list" data-drilldown="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-drilldown-submenu-parent" data-mc-css-tree-node-collapsed="is-drilldown-submenu-parent" data-mc-css-sub-menu="vertical menu slide-in-right is-drilldown-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.drilldown" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" role="banner" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1279px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="http://www.crestron.com" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <div class="padding">
                                        <div class="nocontent">
                                            <div class="MCBreadcrumbsBox_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider=" / " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix"> </span>
                                            </div>
                                        </div>
                                        <div role="main" id="mc-main-content">
                                            <h1>Best Practices</h1>
                                            <p>The following best practices should be followed when developing drivers with the SDK. Best practices are grouped by development tasks.</p>
                                            <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><h2><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="10" width="16" alt="Closed" data-mc-alt2="Open" />Driver Development</a></h2></span>
                                                <div class="MCDropDownBody dropDownBody">
                                                    <p>There are numerous different types of device drivers that can be developed using Crestron Driver framework. The framework currently supports</p>
                                                    <ul>
                                                        <li>AV Receiver</li>
                                                        <li>Blu-ray Disc® Player</li>
                                                        <li>Cable Box</li>
                                                        <li>Flat Panel Display</li>
                                                        <li>Projector</li>
                                                        <li>Video Server (Streaming Media)</li>
                                                    </ul>
                                                    <p>Additionally, more device types will be added to the framework that will enable developers to add more controllable devices that can be used by all Crestron® control platforms, including Crestron Home™ OS&#160;and AV Framework™ software.</p>
                                                    <p>The following best practices are designed to give you the best possible result when developing drivers:</p>
                                                    <ul>
                                                        <li>Follow the guidelines listed by Microsoft® in C# Coding Conventions at <a href="https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/inside-a-program/coding-conventions">https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/inside-a-program/coding-conventions</a>.</li>
                                                        <li>Name drivers in the format of “DeviceType_Manufacturer_BaseModel_Transport”.  For example, an AV&#160;Receiver driver could be called “AvReceiver_Anthem_MRX-720_IP”.</li>
                                                        <li>Allow the framework to do most of the work:<ul><li>If you have added all of the commands into the driver JSON&#160;correctly, including any response headers and feedback, the framework should be able to control the device without many changes by the developer.</li><li>If you need to change how the driver either builds or sends commands, or how the driver handles feedback, we have provided a way for this to be accomplished.</li></ul></li>
                                                        <li>The driver can logically be broken up into four sections.<ul><li><strong>Driver Transport</strong>:&#160;The transport used to send commands and receive responses.</li><li><strong>Driver Protocol</strong>:&#160;Handles how commands are built and sent to the device</li><li><strong>Driver Response Validation</strong>:&#160;Used to validate the responses from the connected device.</li><li><strong>Driver JSON</strong>:&#160;Used to input the data found in the manufacturer’s API, which is used to communicate with the connected device.<ul><li>The manufacturer will typically provide information on how to communicate with their devices including commands, responses, and communication details.</li><li>Properly constructed JSON is essential for getting most of the work done in the driver.</li></ul></li></ul></li>
                                                        <li>If this is not an IP driver, do not assum that all calls to <span class="codeinline">ResponseValidation</span> and <span class="codeinline">DataHandler</span> will contain the full message; it might come in byte-by-byte. Therefore, the driver should be written to collect the data until a full message is captured. This should be done in <span class="codeinline">ValidateResponse(…)</span>.<ul><li>Most serial protocols will give a clear delimiter for the end of each response, which generally appears as a carriage return.</li><li>Check the manufacturer documentation to ensure that you gather the response up to and including the delimiter before processing the response.</li></ul></li>
                                                        <li>The <span class="codeinline">WarmUpTime</span> should consider the amount of time it takes for the device to power on and the amount of time it takes until the driver is able to control the device.<ul><li>For example, a TV that uses Wake On LAN to power on might take five seconds to show an image but an additional ten seconds until the TV responds to any queries or it is controllable. The <span class="codeinline">WarmUpTime</span> in this case should be 15 seconds.</li></ul></li>
                                                        <li>The <span class="codeinline">CoolDownTime</span> should consider the amount of time it takes for the device to completely shut off and it is able to be powered back on again.<ul><li>For example, a receiver takes one second to shut off but an additional four seconds until it responds to a PowerPoll and it can power back on. The <span class="codeinline">CoolDownTime</span> in this case should be 5 seconds.</li><li>Lamps used by these devices can easily be damaged if they are not sufficiently cooled before attempting to restart.</li><li>Most manufacturers build in safeguards, but users should not feel as if there could be an issue with their equipment.  The cooldown time is one way we can inform a user that the projector requires more time to cool down before it is powered on again.</li></ul></li>
                                                        <li>The GUID listed under <span class="codeinline">GenralInformation</span> in the JSON should be unique. Duplicates can happen when copying the JSON of one driver to create another driver. Visual Studio can create a new GUID in the registry format under <strong>Tools</strong> &gt; <strong>Create GUID</strong>.</li>
                                                        <li>Send commands to the device using the queuing logic instead of directly through the transport. Build the <span class="codeinline">CommandSet</span> and send it using <span class="codeinline">SendCommand()</span>.</li>
                                                        <li>If a device requires setup in its settings to enable control, concise instructions should be provided in the User Attributes section in the JSON. Refer to the following sample code.</li>
                                                        <p class="codeboxshade">"UserAttributes": [<span class="indent">{<br /><span class="indent">"TypeName": "MessageBox",<br />"ParameterId": "Configuration Notice 1",<br />"Label": "Setup Instructions",<br />"Description": "To enable IP Control on the device go to Home &gt; Settings &gt; Wireless and Networks &gt; External Control &gt; IP Control &gt; set to 'ON'",<br />"Persistent": false,<br />"RequiredForConnection": "None",<br />"Data": {<br /><span class="indent">"DataType": "",<br />"Mask": "",<br />"DefaultValue": ""</span>}</span>}<br /></span>]</p>
                                                        <li>Avoid calling functionality that may not have existed in an older version of the driver framework to prevent <span class="codeinline">MissingMethodExceptions</span> when loading driver into systems containing an outdated framework version.</li>
                                                        <li>If a driver uses anything that implements IDisposable (such as a CTimer used in a driver), it must be disposed of in an override of <span class="codeinline">Dispose()</span> and the base method must be called. <span class="codeinline">Dispose()</span> can be overridden in the protocol class.</li>
                                                        <li>Check if <span class="codeinline">EnableLogging</span> is true before sending a string to the <span class="codeinline">Log()</span> method. Although the <span class="codeinline">Log()</span> method already contains a check for <span class="codeinline">EnableLogging</span>, checking beforehand prevents allocating a string in memory that will not be logged if <span class="codeinline">EnableLogging</span> is disabled.</li>
                                                        <li>Methods that have a potential to cause exceptions should be placed in a try catch with a clear logging and a stack trace for easier field debugging.<ul><li>As an example, attempting to parse from a string into an int.  If there are no numeric values in the string this will throw an exception.</li><li>Visual Studio 2008 does not support <span class="codeinline">TryParse</span>.</li></ul></li>
                                                        <li>For APIs where a single poll command can specify multiple values, such as mute state, volume level, current input, and power status, the driver should only specify that command as a poll command, and must set the command group of <span class="codeinline">ValidatedRxData</span> in <span class="codeinline">ValidateResponse(…)</span>  to the command group of that poll command to prevent time-outs. Along with this, <span class="codeinline">ValidateResponse</span> must directly call <span class="codeinline">Protocol.ChooseDeconstructMethod</span> and <span class="codeinline">Protocol.DeConstruct&lt;Feature&gt;</span> on all data that is not part of the single poll command.<ul><li>This is common for drivers that respond using JSON or HTML to have multiple statuses within the response.  If this is the case, poll for one status and process all of the statuses at once.</li><li>This can be done by overriding <span class="codeinline">DataHandler</span>, deserializing the response, formating a response for each status, and individually calling base.DataHandler for each.</li><li>Alternatively, deserialize each response in <span class="codeinline">ResponseValidation</span>, then process and call deconstruct for each status except the one polled for.  For example, if polling for power status and the device returns power status and mute status, process the mute status and call <span class="codeinline">deconstructMute</span> and return <span class="codeinline">ValidatedRxData</span> with power status.</li></ul></li>
                                                        <li>Set <span class="codeinline">WaitForResponse</span> to true on all drivers that use HTTP/HTTPS and ensure <span class="codeinline">ValidateResponse(…)</span> always returns <span class="codeinline">ValidatedRxData.Ready/Ignore</span> to true on each call to it.</li>
                                                        <li>Simulating feedback can be done by calling <span class="codeinline">DeConstruct&lt;Feature&gt;</span> methods with the string they expect.<ul><li>Simulating feedback may be needed if the device takes a long time to respond to a polling query.  This would occur mostly to ensure a good user experience.</li><li>Since all devices are different, the driver developer should a user to feel like all equipment looks and acts the same when using Crestron hardware.</li><li>Sending the expected feedback value to the framework as “fake” is essentially helping the device by telling the user what they did and eventually updating the feedback with the actual status from the device.</li></ul></li>
                                                        <li>Avoid calls to <span class="codeinline">CrestronEnvironment.Sleep(…).</span><ul><li>This creates a new thread and can be an issue if multiple instances are creating new threads.</li><li>This can have negative consequences depending on how many instances of the driver your program is using.</li></ul></li>
                                                    </ul>
                                                </div>
                                            </div>
                                            <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><h2><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="10" width="16" alt="Closed" data-mc-alt2="Open" />Device Inputs</a></h2></span>
                                                <div class="MCDropDownBody dropDownBody">
                                                    <p>When selecting Standard Commands, it is important to pick the closest matching Standard Command that is supported in the device SDK. </p>
                                                    <p>This is not difficult for devices such as TVs and DVD players because the connectors are straightforward (such as HDMI). However, AV&#160;Receiver devices are more complicated. Refer to <a href="#AV" class="MCXref xref">AV Receiver Inputs</a> for more information.</p>
                                                    <ul>
                                                        <li>For most devices, specify the Standard Command that closely matches the connector type. Refer to <a href="Audio-Video-Connections.htm" class="MCXref xref">Audio/Video Connections</a> for more information.</li>
                                                        <li>The following SD video connections should be omitted from the input and output connector lists due to being phased out in the industry.<ul><li><strong>Component</strong></li><li><strong>Composite</strong></li><li><strong>S-Video</strong></li></ul></li>
                                                        <li>TV Antennas are included as part of the Media Service Provider and not as an Input source.</li>
                                                        <li>If an input supports control or transport functions and/or does not have a physical connection, then it will need to be defined as a Media Service and not an Input.</li>
                                                        <li>If an item is defined as a Media Service, then it should not be included as part of the Input list.</li>
                                                        <li>For video devices that do not carry an audio output or include speakers, the input connections will need to be defined as video only.</li>
                                                        <li>The preferred Standard Command is INPUT1 – INPUTx . The friendly name should resemble the name as notated on the device buttons or menu/device display.<ul><li>Input 1 = 1800</li><li>Input 2 = 1801</li><li>Input 3 = 1802</li></ul></li>
                                                    </ul>
                                                </div>
                                            </div>
                                            <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><h2><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="10" width="16" alt="Closed" data-mc-alt2="Open" /></a><a name="AV"></a><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_" aria-expanded="false">AV Receiver Inputs</a></h2></span>
                                                <div class="MCDropDownBody dropDownBody">
                                                    <p>AV Receivers use the following rules:</p>
                                                    <ul>
                                                        <li>The only INPUT connector types that should be used are <span class="codeinline">GenericAudio</span> or <span class="codeinline">GenericAV</span>.</li>
                                                        <li>Devices are limited to a maximum of 50 supported Inputs.</li>
                                                        <li>Attempt to choose the Standard Command that closely matches the Button Label or Display Name.</li>
                                                        <li>The preferred Standard Command is INPUT1 – INPUTx . The friendly name should resemble the name as notated on the device buttons or menu/device display.<ul><li>Input 1 = 1800</li><li>Input 2 = 1801</li><li>Input 3 = 1802</li></ul></li>
                                                        <li>All Video inputs that support audio will need to specify with connector values of GenericAV (150) and must be specified under the audio section as GenericAudio (130) with a friendly name that includes “Audio Only."<ul><li>If the input is Audio only, then “Audio Only” should not be applied to the friendly name.</li></ul></li>
                                                        <li>All Video inputs that do not support audio will need to specify with connector values of GenericVideo (160).</li>
                                                        <li>All audio inputs must be specified under the audio section as GenericAudio (130) with a friendly name that includes&#160;"Audio Only."</li>
                                                        <li>The “Friendly Name” field is a way to identify the input as it is represented by the device. You may use the display name or name that is printed on the remote button. If it is an audio only or the audio portion of the video input, then "Audio Only"&#160;will need to be added to the friendly name.</li>
                                                        <li>If an audio only input has the ability tp assign a video input to that source, such as a CD, Tuner, or a Phono, then these inputs need to be supported as <span class="codeinline">GenericAV</span>. This could be accomplished by using a standard command type of Input1 ~ 15 (or IN1 ~ IN15 for IR) and specifying the friendly name as listed for that input source (such as CD, Tuner or Phono). This would allow data to be passed through the packaging script and would allow support within Crestron Home and other applications.</li>
                                                        <li>Use actual connectors and do not use the <span class="codeinline">GenericAudio</span> and <span class="codeinline">GenericAV</span> Audio Video Enums to define outputs.</li>
                                                        <li>Multizone Receiver Inputs should be mapped exactly the same as the main zone.<ul><li>All available audio and video inputs must use the same standard commands as their main zone selections use. This will ensure that all input routes can be properly made in products that consume the drivers.</li><li>Be aware that not all inputs available in the main zone can be selected in the remote zones. Refer to the manufacturer's user manual to determine which inputs can be selected from the remote zones.</li><li>Check if the receiver will also allow for video source inputs to be selected in the remote zones.</li></ul></li>
                                                    </ul>
                                                </div>
                                            </div>
                                            <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><h2><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="10" width="16" alt="Closed" data-mc-alt2="Open" />Driver Overrides</a></h2></span>
                                                <div class="MCDropDownBody dropDownBody">
                                                    <p>Each device type is written with abstract classes.  The methods are defined with the virtual keyword, which allows the developer to override any base class method that needs more attention than normal.  When a method is overridden in a derived class, the developer must ensure that the method runs exactly as it would in the base class.</p>
                                                    <ul>
                                                        <li>Overrides give the developer the ability to change something that does not do what is expected from the framework.<ul><li>Once you override, you can still call the base after the change, or you can completely disregard the base and take over from here.</li><li>If the base is not called, you must construct your commands properly in order to utilize the command queue.  Calls to <span class="codeinline">SendCommand()</span> will be queued.  <span class="codeinline">Transport.Send()</span> bypasses the queue.</li><li>Always use the queue and allow the framework to handle everything.<ul><li>All commands that the developer creates or builds in the driver should be given a priority so the queue knows how to distribute them.</li><li>Priorities using the <span class="codeinline">CommandPriority</span> enum are:<ul><li><strong>Highest</strong></li><li><strong>High</strong></li><li><strong>Normal</strong></li><li><strong>Low</strong></li><li><strong>Lowest</strong></li></ul></li><li>A <strong>Special</strong> priority is provided that has a higher priority than <strong>Highest</strong>.  This should only be used in very unique circumstances where the command must take precedence over all other commands.</li><li>Commands like <span class="codeinline">Power</span> should always have <strong>Highest</strong> priority, followed by <span class="codeinline">Input</span> or <span class="codeinline">AudioInput</span> with <strong>High</strong> priority.  This will ensure that <span class="codeinline">Power</span> will always leave the queue first before <span class="codeinline">Input</span>.</li><li>A common mistake is giving all commands a <strong>Normal</strong> priority.  This will have a significant impact on queuing logic since commands will not be processed in the correct order.</li></ul></li></ul></li>
                                                        <li>The following diagram shows a workflow of the queuing process.</li>
                                                        <p>
                                                            <img src="../Resources/Images/CCD-MS-14.png" style="height: 600px;" />
                                                        </p>
                                                    </ul>
                                                </div>
                                            </div>
                                            <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><h2><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="10" width="16" alt="Closed" data-mc-alt2="Open" />Troubleshooting</a></h2></span>
                                                <div class="MCDropDownBody dropDownBody">
                                                    <p>Many issues relating to the driver not working properly can be found in the driver JSON.  Often, a driver's JSON will pass a validation script, which ensures that the JSONcan be parsed. However, if any of the objects are out of place, the driver cannot properly use them.</p>
                                                    <p>The following image illustrates a properly constructed JSON schema.</p>
                                                    <p>
                                                        <img src="../Resources/Images/CCD-MS-14-2.png" style="width: 350px;border-left-style: solid;border-left-width: 1px;border-left-color: ;border-right-style: solid;border-right-width: 1px;border-right-color: ;border-top-style: solid;border-top-width: 1px;border-top-color: ;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: ;" />
                                                    </p>
                                                    <p>When you run a JSON viewer, the JSON schema should appear as shown in the image above.  In the case that your device is not an AV Receiver, your JSON would not have the AvrZoneData object.  Otherwise, everything else remains the same.</p>
                                                    <ul>
                                                        <li>Input definitions can cause issues that can be problematic if not properly configured.<ul><li>When defining AV Inputs alongside Audio Only inputs, make sure that they use the same Standard Command enum values.  These values are referred to as “type” in the definitions. Ensure that when selecting an input, the correct command gets sent for both AV and Audio Only inputs.</li><li>Crestron Home also uses these “types” to map their input routing when configuring a new system.</li><li>The standard command types should map the same through all remote zones as well.  An AV Receiver that supports multiple zones should map all input selections to the same standard command types as the main zone.</li><p><img src="../Resources/Images/CCD-MS-14-3.png" style="width: 250px;" /></p></ul></li>
                                                        <li>Aside from JSON issues, many issues could be related to any method overrides in the driver.<ul><li>If you override a method in the driver, you still must make the method run without any errors.  If the override is causing any exceptions in the driver, you may need to add a try/catch in order to isolate the issue.  If an exception is thrown, at least the driver will continue to run.</li><li>If there is an exception, even in a try/catch, you should eliminate the exception using proper programming.</li><li>Integer conversions are common places where exceptions are thrown if the string you are trying to convert does not contain a number.</li><li>When logging exceptions, log a stack trace on the exception.  This is helpful for identifying the issue and to show another developer where to begin.</li></ul></li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="buttons popup-container clearfix topicToolbarProxy _Skins_TPSkin_TopicToolbar mc-component nocontent" style="mc-topic-toolbar-items: ;">
                                            <div class="button-group-container-left">
                                                <button class="button needs-pie previous-topic-button" title="Previous page">
                                                    <img alt="Navigate previous" src="../../Skins/Default/Stylesheets/Images/transparent.gif" class="invisible-label" />
                                                </button>
                                                <button class="button needs-pie next-topic-button" title="Next page">
                                                    <img alt="Navigate next" src="../../Skins/Default/Stylesheets/Images/transparent.gif" class="invisible-label" />
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>